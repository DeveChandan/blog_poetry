{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Web%20Project/Poemsite/blog_poetry/components/pdf-viewer.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useState, useEffect } from \"react\"\r\nimport { Document, Page, pdfjs } from \"react-pdf\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { \r\n  ChevronLeft, \r\n  ChevronRight, \r\n  Download, \r\n  File, \r\n  AlertCircle, \r\n  Loader2,\r\n  ExternalLink,\r\n  FileText,\r\n  FileQuestion,\r\n  RefreshCw,\r\n  Eye,\r\n  Printer,\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Maximize2,\r\n  Minimize2,\r\n  Smartphone,\r\n  Tablet,\r\n  Monitor,\r\n  SmartphoneIcon,\r\n  RotateCcw,\r\n  Grid,\r\n  Menu,\r\n  X\r\n} from \"lucide-react\"\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\r\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\"\r\nimport { Sheet, SheetContent, SheetTrigger, SheetClose } from \"@/components/ui/sheet\"\r\nimport { Dialog, DialogContent, DialogTrigger } from \"@/components/ui/dialog\"\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\"\r\nimport { Slider } from \"@/components/ui/slider\"\r\n\r\n// Set the workerSrc for pdf.js\r\npdfjs.GlobalWorkerOptions.workerSrc = `//unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.mjs`\r\n\r\ninterface PdfViewerProps {\r\n  fileUrl: string\r\n  isPreview?: boolean\r\n  previewLimit?: number\r\n  onRequirePurchase?: () => void\r\n  isMobile?: boolean\r\n}\r\n\r\n// Supported document types\r\nconst SUPPORTED_FORMATS = {\r\n  pdf: ['.pdf'],\r\n  word: ['.doc', '.docx', '.docm', '.dot', '.dotx'],\r\n  excel: ['.xls', '.xlsx', '.xlsm', '.xlt', '.xltx'],\r\n  powerpoint: ['.ppt', '.pptx', '.pptm', '.pot', '.potx'],\r\n  text: ['.txt', '.rtf', '.md', '.csv'],\r\n  image: ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp', '.svg']\r\n}\r\n\r\nexport default function PdfViewer({\r\n  fileUrl,\r\n  isPreview = false,\r\n  previewLimit = 5,\r\n  onRequirePurchase = () => {},\r\n  isMobile = false,\r\n}: PdfViewerProps) {\r\n  const [numPages, setNumPages] = useState<number | null>(null)\r\n  const [pageNumber, setPageNumber] = useState(1)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [fileType, setFileType] = useState<string>(\"\")\r\n  const [fileCategory, setFileCategory] = useState<string>(\"\")\r\n  const [activeTab, setActiveTab] = useState<string>(\"viewer\")\r\n  const [viewerError, setViewerError] = useState<string>(\"\")\r\n  const [textContent, setTextContent] = useState<string>(\"\")\r\n  const [zoom, setZoom] = useState<number>(1)\r\n  const [rotation, setRotation] = useState<number>(0)\r\n  const [fullscreen, setFullscreen] = useState<boolean>(false)\r\n  const [showControls, setShowControls] = useState<boolean>(true)\r\n\r\n  // Auto-hide controls on mobile after 3 seconds\r\n  useEffect(() => {\r\n    if (!isMobile || !showControls) return\r\n    \r\n    const timer = setTimeout(() => {\r\n      setShowControls(false)\r\n    }, 3000)\r\n    \r\n    return () => clearTimeout(timer)\r\n  }, [showControls, isMobile])\r\n\r\n  // Toggle controls visibility on mobile\r\n  const toggleControls = () => {\r\n    setShowControls(!showControls)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!fileUrl) {\r\n      setError(\"No file URL provided\")\r\n      setLoading(false)\r\n      return\r\n    }\r\n\r\n    // Extract file extension\r\n    const extension = fileUrl.substring(fileUrl.lastIndexOf('.')).toLowerCase()\r\n    setFileType(extension)\r\n    \r\n    // Determine file category\r\n    let category = \"unknown\"\r\n    for (const [cat, exts] of Object.entries(SUPPORTED_FORMATS)) {\r\n      if (exts.includes(extension)) {\r\n        category = cat\r\n        break\r\n      }\r\n    }\r\n    setFileCategory(category)\r\n    \r\n    console.log(\"File detected:\", { extension, category, fileUrl })\r\n    \r\n    // Reset state\r\n    setLoading(true)\r\n    setError(null)\r\n    setViewerError(\"\")\r\n\r\n    // Load text content for text files\r\n    if (category === 'text') {\r\n      fetch(fileUrl)\r\n        .then(response => {\r\n          if (!response.ok) throw new Error(`HTTP ${response.status}`)\r\n          return response.text()\r\n        })\r\n        .then(text => {\r\n          setTextContent(text.slice(0, 50000)) // Limit to 50k chars\r\n          setLoading(false)\r\n        })\r\n        .catch(err => {\r\n          console.error(\"Failed to load text file:\", err)\r\n          setTextContent(\"Unable to load text content. Please download the file to view.\")\r\n          setLoading(false)\r\n        })\r\n    } else {\r\n      setTimeout(() => setLoading(false), 500)\r\n    }\r\n  }, [fileUrl])\r\n\r\n  const onDocumentLoadSuccess = ({ numPages }: { numPages: number }) => {\r\n    console.log(\"PDF loaded successfully. Number of pages:\", numPages);\r\n    setNumPages(numPages)\r\n    setLoading(false)\r\n    setError(null)\r\n  }\r\n\r\n  const onDocumentLoadError = (err: Error) => {\r\n    console.error(\"Failed to load PDF document:\", err)\r\n    setError(`Failed to load PDF document. ${err.message}`)\r\n    setLoading(false)\r\n  }\r\n\r\n  const handleDownload = () => {\r\n    try {\r\n      const link = document.createElement('a')\r\n      link.href = fileUrl\r\n      link.download = fileUrl.substring(fileUrl.lastIndexOf('/') + 1)\r\n      link.style.display = 'none'\r\n      document.body.appendChild(link)\r\n      link.click()\r\n      document.body.removeChild(link)\r\n    } catch (err) {\r\n      console.error(\"Download failed:\", err)\r\n      setViewerError(\"Download failed. Please try again.\")\r\n    }\r\n  }\r\n\r\n  const goToPrevPage = () => {\r\n    setPageNumber(prev => Math.max(prev - 1, 1))\r\n    if (isMobile) setShowControls(true)\r\n  }\r\n\r\n  const goToNextPage = () => {\r\n    if (isPreview && pageNumber >= previewLimit) {\r\n      onRequirePurchase()\r\n      return\r\n    }\r\n    setPageNumber(prev => Math.min(prev + 1, numPages || 1))\r\n    if (isMobile) setShowControls(true)\r\n  }\r\n\r\n  const goToPage = (page: number) => {\r\n    if (page >= 1 && page <= (numPages || 1)) {\r\n      setPageNumber(page)\r\n      if (isMobile) setShowControls(true)\r\n    }\r\n  }\r\n\r\n  const zoomIn = () => {\r\n    setZoom(prev => Math.min(prev + 0.25, 3))\r\n    if (isMobile) setShowControls(true)\r\n  }\r\n\r\n  const zoomOut = () => {\r\n    setZoom(prev => Math.max(prev - 0.25, 0.5))\r\n    if (isMobile) setShowControls(true)\r\n  }\r\n\r\n  const rotate = () => {\r\n    setRotation(prev => (prev + 90) % 360)\r\n    if (isMobile) setShowControls(true)\r\n  }\r\n\r\n  const toggleFullscreen = () => {\r\n    if (!document.fullscreenElement) {\r\n      document.documentElement.requestFullscreen()\r\n      setFullscreen(true)\r\n    } else {\r\n      document.exitFullscreen()\r\n      setFullscreen(false)\r\n    }\r\n    if (isMobile) setShowControls(true)\r\n  }\r\n\r\n  // Generate viewer URLs\r\n  const getGoogleDocsViewerUrl = () => {\r\n    return `https://docs.google.com/viewer?url=${encodeURIComponent(fileUrl)}&embedded=true`\r\n  }\r\n\r\n  const getMicrosoftViewerUrl = () => {\r\n    return `https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(fileUrl)}`\r\n  }\r\n\r\n  // Handle iframe error\r\n  const handleIframeError = () => {\r\n    setViewerError(\"Unable to load document preview. The document may be too large, private, or in an unsupported format.\")\r\n  }\r\n\r\n  // Get file icon based on type\r\n  const getFileIcon = () => {\r\n    switch (fileCategory) {\r\n      case 'pdf': return 'ðŸ“„'\r\n      case 'word': return 'ðŸ“'\r\n      case 'excel': return 'ðŸ“Š'\r\n      case 'powerpoint': return 'ðŸ“½ï¸'\r\n      case 'image': return 'ðŸ–¼ï¸'\r\n      case 'text': return 'ðŸ“ƒ'\r\n      default: return 'ðŸ“'\r\n    }\r\n  }\r\n\r\n  // Get viewer options for the file type\r\n  const getViewerOptions = () => {\r\n    const options = []\r\n    \r\n    if (fileCategory === 'pdf') {\r\n      options.push({ id: 'native', name: 'Native PDF Viewer', description: 'Best quality' })\r\n    }\r\n    \r\n    if (['word', 'excel', 'powerpoint'].includes(fileCategory)) {\r\n      options.push(\r\n        { id: 'microsoft', name: 'Microsoft Viewer', description: 'Official viewer' },\r\n        { id: 'google', name: 'Google Docs Viewer', description: 'Alternative viewer' }\r\n      )\r\n    } else if (fileCategory !== 'pdf') {\r\n      options.push(\r\n        { id: 'google', name: 'Google Docs Viewer', description: 'Best compatibility' }\r\n      )\r\n    }\r\n    \r\n    options.push({ id: 'download', name: 'Download Only', description: 'View on your device' })\r\n    \r\n    return options\r\n  }\r\n\r\n  const viewerOptions = getViewerOptions()\r\n\r\n  // Mobile PDF Controls Component\r\n  const MobilePDFControls = () => (\r\n    <div className={`fixed bottom-4 left-4 right-4 z-50 transition-all duration-300 ${showControls ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10 pointer-events-none'}`}>\r\n      <div className=\"bg-black/80 backdrop-blur-md rounded-2xl p-3 shadow-2xl\">\r\n        <div className=\"flex items-center justify-between mb-3\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-white text-sm font-medium\">\r\n              Page {pageNumber} of {numPages || \"...\"}\r\n            </span>\r\n          </div>\r\n          <Button\r\n            size=\"icon\"\r\n            variant=\"ghost\"\r\n            className=\"h-8 w-8 text-white hover:bg-white/20\"\r\n            onClick={toggleControls}\r\n          >\r\n            <X className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n        \r\n        <div className=\"grid grid-cols-4 gap-2\">\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            className=\"h-10 text-white border-white/30 hover:bg-white/20\"\r\n            onClick={goToPrevPage}\r\n            disabled={pageNumber <= 1}\r\n          >\r\n            <ChevronLeft className=\"h-4 w-4\" />\r\n          </Button>\r\n          \r\n          <Sheet>\r\n            <SheetTrigger asChild>\r\n              <Button\r\n                size=\"sm\"\r\n                variant=\"outline\"\r\n                className=\"h-10 text-white border-white/30 hover:bg-white/20\"\r\n              >\r\n                <Grid className=\"h-4 w-4\" />\r\n              </Button>\r\n            </SheetTrigger>\r\n            <SheetContent side=\"bottom\" className=\"h-[60vh]\">\r\n              <div className=\"p-4\">\r\n                <h3 className=\"text-lg font-semibold mb-4\">Jump to Page</h3>\r\n                <div className=\"grid grid-cols-4 gap-2\">\r\n                  {Array.from({ length: numPages || 0 }, (_, i) => i + 1).map(page => (\r\n                    <Button\r\n                      key={page}\r\n                      variant={page === pageNumber ? \"default\" : \"outline\"}\r\n                      className=\"h-12\"\r\n                      onClick={() => {\r\n                        goToPage(page)\r\n                        document.querySelector('[data-state=\"closed\"]')?.click()\r\n                      }}\r\n                    >\r\n                      {page}\r\n                    </Button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </SheetContent>\r\n          </Sheet>\r\n          \r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            className=\"h-10 text-white border-white/30 hover:bg-white/20\"\r\n            onClick={zoomIn}\r\n          >\r\n            <ZoomIn className=\"h-4 w-4\" />\r\n          </Button>\r\n          \r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            className=\"h-10 text-white border-white/30 hover:bg-white/20\"\r\n            onClick={goToNextPage}\r\n            disabled={pageNumber >= (numPages || 1)}\r\n          >\r\n            <ChevronRight className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n        \r\n        <div className=\"mt-3 pt-3 border-t border-white/20\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"ghost\"\r\n              className=\"flex-1 h-9 text-white hover:bg-white/20\"\r\n              onClick={toggleFullscreen}\r\n            >\r\n              {fullscreen ? (\r\n                <Minimize2 className=\"h-4 w-4 mr-2\" />\r\n              ) : (\r\n                <Maximize2 className=\"h-4 w-4 mr-2\" />\r\n              )}\r\n              {fullscreen ? \"Exit\" : \"Fullscreen\"}\r\n            </Button>\r\n            \r\n            <Button\r\n              size=\"sm\"\r\n              variant=\"ghost\"\r\n              className=\"flex-1 h-9 text-white hover:bg-white/20\"\r\n              onClick={handleDownload}\r\n            >\r\n              <Download className=\"h-4 w-4 mr-2\" />\r\n              Download\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  // Show loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"h-full flex flex-col items-center justify-center p-4 md:p-8\">\r\n        <div className=\"relative mb-4 md:mb-6\">\r\n          <Loader2 className=\"w-12 h-12 md:w-16 md:h-16 text-primary animate-spin\" />\r\n          <div className=\"absolute inset-0 flex items-center justify-center\">\r\n            <span className=\"text-xl md:text-2xl\">{getFileIcon()}</span>\r\n          </div>\r\n        </div>\r\n        <p className=\"text-lg md:text-xl font-medium mb-2\">Loading Document</p>\r\n        <p className=\"text-muted-foreground text-center text-sm md:text-base\">\r\n          Preparing {fileType.toUpperCase().replace('.', '')} file for viewing...\r\n        </p>\r\n        {isMobile && (\r\n          <div className=\"mt-4 flex items-center gap-2 text-sm text-muted-foreground\">\r\n            <SmartphoneIcon className=\"h-4 w-4\" />\r\n            <span>Mobile View</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Handle PDF files - Native viewer\r\n  if (fileCategory === 'pdf' && activeTab === 'viewer') {\r\n    return (\r\n      <div className=\"relative h-full\">\r\n        {/* Mobile overlay for showing controls */}\r\n        {isMobile && (\r\n          <>\r\n            <MobilePDFControls />\r\n            {/* Tap area to show controls */}\r\n            <div \r\n              className=\"absolute inset-0 z-40\"\r\n              onClick={toggleControls}\r\n            />\r\n          </>\r\n        )}\r\n        \r\n        <div className={`flex flex-col items-center space-y-4 ${isMobile ? 'pb-24' : ''}`}>\r\n          {/* Desktop Controls */}\r\n          {!isMobile && (\r\n            <div className=\"w-full max-w-5xl flex flex-col sm:flex-row items-center justify-between gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-sm font-medium\">Page Navigation:</span>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Button \r\n                    onClick={goToPrevPage} \r\n                    disabled={pageNumber <= 1} \r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                  >\r\n                    <ChevronLeft className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <span className=\"text-sm text-muted-foreground min-w-[100px] text-center\">\r\n                    Page {pageNumber} of {numPages || \"...\"}\r\n                  </span>\r\n                  <Button \r\n                    onClick={goToNextPage} \r\n                    disabled={pageNumber >= (numPages || 1)} \r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                  >\r\n                    <ChevronRight className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"text-sm font-medium\">Zoom:</span>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Button onClick={zoomOut} variant=\"outline\" size=\"sm\">\r\n                    <ZoomOut className=\"h-4 w-4\" />\r\n                  </Button>\r\n                  <span className=\"text-sm text-muted-foreground min-w-[50px] text-center\">\r\n                    {Math.round(zoom * 100)}%\r\n                  </span>\r\n                  <Button onClick={zoomIn} variant=\"outline\" size=\"sm\">\r\n                    <ZoomIn className=\"h-4 w-4\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center gap-2\">\r\n                <Button onClick={rotate} variant=\"outline\" size=\"sm\">\r\n                  <RotateCcw className=\"h-4 w-4\" />\r\n                </Button>\r\n                <Button onClick={toggleFullscreen} variant=\"outline\" size=\"sm\">\r\n                  {fullscreen ? (\r\n                    <Minimize2 className=\"h-4 w-4\" />\r\n                  ) : (\r\n                    <Maximize2 className=\"h-4 w-4\" />\r\n                  )}\r\n                </Button>\r\n                <Button onClick={handleDownload} variant=\"secondary\" size=\"sm\">\r\n                  <Download className=\"h-4 w-4\" />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* PDF Document */}\r\n          <div className={`w-full ${isMobile ? 'max-w-full' : 'max-w-5xl'} border border-border rounded-lg overflow-hidden shadow-lg bg-white`}>\r\n            <Document\r\n              file={fileUrl}\r\n              onLoadSuccess={onDocumentLoadSuccess}\r\n              onLoadError={onDocumentLoadError}\r\n              className=\"w-full\"\r\n              loading={\r\n                <div className=\"flex items-center justify-center p-12\">\r\n                  <Loader2 className=\"w-8 h-8 text-primary animate-spin\" />\r\n                </div>\r\n              }\r\n            >\r\n              <Page \r\n                pageNumber={pageNumber} \r\n                width={isMobile ? window.innerWidth - 40 : 800}\r\n                scale={zoom}\r\n                rotate={rotation}\r\n                renderTextLayer={false}\r\n                renderAnnotationLayer={false}\r\n                className=\"w-full\"\r\n              />\r\n            </Document>\r\n          </div>\r\n          \r\n          {/* Desktop Pagination */}\r\n          {!isMobile && (\r\n            <div className=\"flex items-center justify-center w-full max-w-5xl\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <Button \r\n                  onClick={() => goToPage(1)} \r\n                  disabled={pageNumber <= 1}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                >\r\n                  First\r\n                </Button>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-sm text-muted-foreground\">Go to:</span>\r\n                  <input\r\n                    type=\"number\"\r\n                    min=\"1\"\r\n                    max={numPages || 1}\r\n                    value={pageNumber}\r\n                    onChange={(e) => goToPage(parseInt(e.target.value) || 1)}\r\n                    className=\"w-20 px-3 py-1 text-sm border rounded-lg\"\r\n                  />\r\n                </div>\r\n                <Button \r\n                  onClick={() => goToPage(numPages || 1)} \r\n                  disabled={pageNumber >= (numPages || 1)}\r\n                  variant=\"outline\"\r\n                  size=\"sm\"\r\n                >\r\n                  Last\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Mobile device indicator */}\r\n          {isMobile && (\r\n            <div className=\"fixed top-4 right-4 z-30\">\r\n              <div className=\"bg-black/50 backdrop-blur-sm rounded-full px-3 py-1\">\r\n                <div className=\"flex items-center gap-1 text-white text-xs\">\r\n                  <Smartphone className=\"h-3 w-3\" />\r\n                  <span>Mobile View</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Handle Office documents with multiple viewer options\r\n  if (['word', 'excel', 'powerpoint'].includes(fileCategory)) {\r\n    const documentType = fileCategory.charAt(0).toUpperCase() + fileCategory.slice(1)\r\n    \r\n    // Mobile-friendly tab view\r\n    const MobileOfficeViewer = () => (\r\n      <div className=\"flex flex-col space-y-4\">\r\n        {/* Mobile tab selector */}\r\n        <div className=\"flex border-b\">\r\n          <button\r\n            className={`flex-1 py-3 text-center ${activeTab === 'microsoft' ? 'border-b-2 border-primary text-primary' : 'text-muted-foreground'}`}\r\n            onClick={() => setActiveTab('microsoft')}\r\n          >\r\n            MS Viewer\r\n          </button>\r\n          <button\r\n            className={`flex-1 py-3 text-center ${activeTab === 'google' ? 'border-b-2 border-primary text-primary' : 'text-muted-foreground'}`}\r\n            onClick={() => setActiveTab('google')}\r\n          >\r\n            Google\r\n          </button>\r\n          <button\r\n            className={`flex-1 py-3 text-center ${activeTab === 'download' ? 'border-b-2 border-primary text-primary' : 'text-muted-foreground'}`}\r\n            onClick={() => setActiveTab('download')}\r\n          >\r\n            Download\r\n          </button>\r\n        </div>\r\n        \r\n        {activeTab === 'microsoft' && (\r\n          <div className=\"h-[400px] border rounded-lg overflow-hidden\">\r\n            <iframe\r\n              src={getMicrosoftViewerUrl()}\r\n              title={`${documentType} Document - Microsoft Viewer`}\r\n              className=\"w-full h-full border-0\"\r\n              sandbox=\"allow-scripts allow-same-origin allow-forms allow-popups\"\r\n              onError={handleIframeError}\r\n            />\r\n          </div>\r\n        )}\r\n        \r\n        {activeTab === 'google' && (\r\n          <div className=\"h-[400px] border rounded-lg overflow-hidden\">\r\n            <iframe\r\n              src={getGoogleDocsViewerUrl()}\r\n              title={`${documentType} Document - Google Viewer`}\r\n              className=\"w-full h-full border-0\"\r\n              sandbox=\"allow-scripts allow-same-origin\"\r\n              onError={handleIframeError}\r\n            />\r\n          </div>\r\n        )}\r\n        \r\n        {activeTab === 'download' && (\r\n          <div className=\"p-6 border-2 border-dashed border-gray-300 rounded-lg\">\r\n            <div className=\"text-center\">\r\n              <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mb-4 mx-auto\">\r\n                <span className=\"text-2xl\">{getFileIcon()}</span>\r\n              </div>\r\n              <h3 className=\"text-lg font-bold mb-2\">Download Document</h3>\r\n              <p className=\"text-muted-foreground text-sm mb-6\">\r\n                Download to view with full functionality\r\n              </p>\r\n              <Button onClick={handleDownload} className=\"w-full\" size=\"lg\">\r\n                <Download className=\"h-4 w-4 mr-2\" />\r\n                Download Now\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Mobile quick actions */}\r\n        <div className=\"flex gap-2\">\r\n          <Button onClick={handleDownload} variant=\"outline\" className=\"flex-1\">\r\n            <Download className=\"h-4 w-4 mr-2\" />\r\n            Download\r\n          </Button>\r\n          <Button variant=\"default\" className=\"flex-1\">\r\n            <ExternalLink className=\"h-4 w-4 mr-2\" />\r\n            Share\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    )\r\n    \r\n    // Desktop view\r\n    const DesktopOfficeViewer = () => (\r\n      <div className=\"flex flex-col space-y-6\">\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n          <TabsList className=\"grid grid-cols-3 mb-6\">\r\n            <TabsTrigger value=\"microsoft\" className=\"gap-2\">\r\n              <FileText className=\"w-4 h-4\" />\r\n              Microsoft Viewer\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"google\" className=\"gap-2\">\r\n              <ExternalLink className=\"w-4 h-4\" />\r\n              Google Viewer\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"download\" className=\"gap-2\">\r\n              <Download className=\"w-4 h-4\" />\r\n              Download\r\n            </TabsTrigger>\r\n          </TabsList>\r\n          \r\n          <TabsContent value=\"microsoft\" className=\"space-y-4\">\r\n            <div className=\"h-[600px] border rounded-lg overflow-hidden\">\r\n              <iframe\r\n                src={getMicrosoftViewerUrl()}\r\n                title={`${documentType} Document - Microsoft Viewer`}\r\n                className=\"w-full h-full border-0\"\r\n                sandbox=\"allow-scripts allow-same-origin allow-forms allow-popups\"\r\n                onError={handleIframeError}\r\n              />\r\n            </div>\r\n          </TabsContent>\r\n          \r\n          <TabsContent value=\"google\" className=\"space-y-4\">\r\n            <div className=\"h-[600px] border rounded-lg overflow-hidden\">\r\n              <iframe\r\n                src={getGoogleDocsViewerUrl()}\r\n                title={`${documentType} Document - Google Viewer`}\r\n                className=\"w-full h-full border-0\"\r\n                sandbox=\"allow-scripts allow-same-origin\"\r\n                onError={handleIframeError}\r\n              />\r\n            </div>\r\n          </TabsContent>\r\n          \r\n          <TabsContent value=\"download\" className=\"space-y-6\">\r\n            <div className=\"p-12 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50\">\r\n              {/* Download content same as before */}\r\n            </div>\r\n          </TabsContent>\r\n        </Tabs>\r\n      </div>\r\n    )\r\n    \r\n    return isMobile ? <MobileOfficeViewer /> : <DesktopOfficeViewer />\r\n  }\r\n\r\n  // Handle text files (mobile optimized)\r\n  if (fileCategory === 'text') {\r\n    return (\r\n      <div className=\"flex flex-col space-y-4 md:space-y-6\">\r\n        <div className=\"border border-border rounded-lg overflow-hidden shadow-lg bg-white\">\r\n          <div className=\"bg-gray-50 p-3 md:p-4 border-b border-gray-200 flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2 md:gap-3\">\r\n              <FileText className=\"w-4 h-4 md:w-5 md:h-5 text-green-600\" />\r\n              <span className=\"font-medium text-sm md:text-base\">\r\n                Text File ({fileType.toUpperCase()})\r\n              </span>\r\n            </div>\r\n            <div className=\"text-xs md:text-sm text-muted-foreground\">\r\n              {textContent.length.toLocaleString()} chars\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"p-3 md:p-6 h-[400px] md:h-[600px] overflow-auto bg-gray-50\">\r\n            <pre className=\"font-mono text-xs md:text-sm whitespace-pre-wrap break-words bg-white p-3 md:p-4 rounded border\">\r\n              {textContent || \"Loading text content...\"}\r\n            </pre>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex flex-col sm:flex-row items-center justify-between gap-3 md:gap-4\">\r\n          <div className=\"text-xs md:text-sm text-muted-foreground\">\r\n            {isMobile ? \"Text viewer\" : \"Plain text viewer â€¢ Basic formatting only\"}\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-2 md:gap-3\">\r\n            <Button onClick={handleDownload} variant=\"default\" size={isMobile ? \"sm\" : \"default\"}>\r\n              <Download className=\"h-4 w-4 mr-2\" />\r\n              {isMobile ? \"Save\" : \"Download Text File\"}\r\n            </Button>\r\n            {!isMobile && (\r\n              <Button variant=\"outline\" className=\"gap-2\">\r\n                <Printer className=\"h-4 w-4\" />\r\n                Print\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Handle images (mobile optimized)\r\n  if (fileCategory === 'image') {\r\n    return (\r\n      <div className=\"flex flex-col space-y-4 md:space-y-6\">\r\n        <div className=\"border border-border rounded-lg overflow-hidden shadow-lg bg-white\">\r\n          <div className=\"bg-gray-50 p-3 md:p-4 border-b border-gray-200\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2 md:gap-3\">\r\n                <FileText className=\"w-4 h-4 md:w-5 md:h-5 text-purple-600\" />\r\n                <span className=\"font-medium text-sm md:text-base\">\r\n                  Image ({fileType.toUpperCase()})\r\n                </span>\r\n              </div>\r\n              {isMobile && (\r\n                <Button\r\n                  size=\"sm\"\r\n                  variant=\"ghost\"\r\n                  onClick={toggleFullscreen}\r\n                >\r\n                  {fullscreen ? (\r\n                    <Minimize2 className=\"h-4 w-4\" />\r\n                  ) : (\r\n                    <Maximize2 className=\"h-4 w-4\" />\r\n                  )}\r\n                </Button>\r\n              )}\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center justify-center p-4 md:p-8 bg-gray-50\">\r\n            <img\r\n              src={fileUrl}\r\n              alt=\"Document Image\"\r\n              className={`max-w-full ${isMobile ? 'max-h-[300px]' : 'max-h-[500px]'} object-contain rounded-lg shadow-lg bg-white p-2`}\r\n              onClick={isMobile ? toggleFullscreen : undefined}\r\n              style={{ cursor: isMobile ? 'pointer' : 'default' }}\r\n              onError={(e) => {\r\n                const target = e.target as HTMLImageElement\r\n                target.src = 'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400\" height=\"300\" viewBox=\"0 0 400 300\"><rect width=\"400\" height=\"300\" fill=\"%23f0f0f0\"/><text x=\"200\" y=\"150\" text-anchor=\"middle\" font-family=\"Arial\" font-size=\"16\" fill=\"%23999\">Image not available</text></svg>'\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex flex-col sm:flex-row items-center justify-between gap-3 md:gap-4\">\r\n          <div className=\"text-xs md:text-sm text-muted-foreground\">\r\n            {isMobile ? `${fileType.toUpperCase()} Image` : `${fileType.toUpperCase()} Image â€¢ View only`}\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-2 md:gap-3\">\r\n            <Button \r\n              onClick={handleDownload} \r\n              variant=\"default\" \r\n              size={isMobile ? \"sm\" : \"default\"}\r\n            >\r\n              <Download className=\"h-4 w-4 mr-2\" />\r\n              {isMobile ? \"Save\" : \"Download Image\"}\r\n            </Button>\r\n            {!isMobile && (\r\n              <Button \r\n                variant=\"outline\"\r\n                className=\"gap-2\"\r\n                onClick={() => window.open(fileUrl, '_blank')}\r\n              >\r\n                <ExternalLink className=\"h-4 w-4\" />\r\n                Open Full Size\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Fullscreen image modal for mobile */}\r\n        {isMobile && fullscreen && (\r\n          <Dialog open={fullscreen} onOpenChange={setFullscreen}>\r\n            <DialogContent className=\"max-w-[100vw] h-[100vh] p-0 border-0\">\r\n              <div className=\"relative h-full\">\r\n                <Button\r\n                  size=\"icon\"\r\n                  variant=\"ghost\"\r\n                  className=\"absolute top-4 right-4 z-50 text-white bg-black/50 hover:bg-black/70\"\r\n                  onClick={() => setFullscreen(false)}\r\n                >\r\n                  <X className=\"h-6 w-6\" />\r\n                </Button>\r\n                <img\r\n                  src={fileUrl}\r\n                  alt=\"Document Image Fullscreen\"\r\n                  className=\"w-full h-full object-contain bg-black\"\r\n                />\r\n              </div>\r\n            </DialogContent>\r\n          </Dialog>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Default view for unsupported files (mobile optimized)\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center p-4 md:p-8 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50\">\r\n      <div className={`${isMobile ? 'w-16 h-16' : 'w-20 h-20'} rounded-full bg-gray-100 flex items-center justify-center mb-4 md:mb-6`}>\r\n        <FileQuestion className={`${isMobile ? 'w-8 h-8' : 'w-10 h-10'} text-gray-400`} />\r\n      </div>\r\n      \r\n      <h3 className={`${isMobile ? 'text-xl' : 'text-2xl'} font-bold mb-2 text-center`}>\r\n        Unsupported File Format\r\n      </h3>\r\n      <p className=\"text-muted-foreground text-center text-sm md:text-base mb-4 md:mb-6 max-w-md\">\r\n        This {fileType.toUpperCase()} file cannot be previewed in the browser.\r\n      </p>\r\n      \r\n      <div className=\"space-y-3 md:space-y-4 w-full max-w-sm\">\r\n        <Button \r\n          onClick={handleDownload} \r\n          className=\"w-full gap-3 py-4 md:py-6\"\r\n          size={isMobile ? \"default\" : \"lg\"}\r\n        >\r\n          <Download className=\"w-4 h-4 md:w-5 md:h-5\" />\r\n          Download {fileType.toUpperCase()} File\r\n        </Button>\r\n        \r\n        {!isMobile && (\r\n          <Button \r\n            variant=\"outline\" \r\n            className=\"w-full gap-3\"\r\n            onClick={() => window.open(fileUrl, '_blank')}\r\n          >\r\n            <ExternalLink className=\"w-4 h-4\" />\r\n            Try Opening in Browser\r\n          </Button>\r\n        )}\r\n      </div>\r\n      \r\n      {!isMobile && (\r\n        <div className=\"mt-6 md:mt-8 pt-4 md:pt-6 border-t border-gray-200 w-full max-w-md\">\r\n          <h4 className=\"font-medium mb-3 text-sm md:text-base\">Supported formats for preview:</h4>\r\n          <div className=\"grid grid-cols-2 gap-2 text-xs md:text-sm\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-green-500\">âœ“</span>\r\n              <span>PDF (.pdf)</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-blue-500\">âœ“</span>\r\n              <span>Word (.doc, .docx)</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-blue-500\">âœ“</span>\r\n              <span>Excel (.xls, .xlsx)</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-blue-500\">âœ“</span>\r\n              <span>PowerPoint (.ppt, .pptx)</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-green-500\">âœ“</span>\r\n              <span>Images (JPG, PNG, etc.)</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-green-500\">âœ“</span>\r\n              <span>Text files (.txt, .rtf)</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}